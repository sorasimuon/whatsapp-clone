(this["webpackJsonpwhatsapp-clone"]=this["webpackJsonpwhatsapp-clone"]||[]).push([[0],{104:function(e,t,n){e.exports={app__body:"MainWindow_app__body__3K-96"}},122:function(e,t,n){},13:function(e,t,n){e.exports={login:"Login_login__3aCsy",login__title:"Login_login__title__2k-M-",login__form:"Login_login__form__1kOjr",login__elementPosition:"Login_login__elementPosition__2Odpt",login__errorMessage:"Login_login__errorMessage__2xJvH"}},141:function(e,t,n){},143:function(e,t,n){},148:function(e,t,n){},151:function(e,t,n){},152:function(e,t,n){},153:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),s=n.n(r),i=n(14),o=n.n(i),c=(n(122),n(6)),l=(n(86),n(29)),d=n(12),u=Object(r.createContext)(),b=function(e){var t=e.reducer,n=e.initialState,s=e.children;return Object(a.jsx)(u.Provider,{value:Object(r.useReducer)(t,n),children:s})},j=function(){return Object(r.useContext)(u)},_=n(96),v=n.n(_).a.create({baseURL:"https://whatsapp-bck.herokuapp.com/"}),m=n(11),p=n.n(m),h=n(15),f=n(38),O=n.n(f),g=(n(141),n(190)),w=n(194),C=n(205),S=n(195),x=n(47),N=n.n(x),y=n(17),E=n.n(y),k=n(26),T=(n(143),n(100)),L=n.n(T),R=n(206),I=n(72),P=Object(g.a)((function(e){var t;return{iconButton:{fontSize:30,fontWeight:200,color:I.a[600],alignSelf:"end",paddingRight:0},inputInput:(t={backgroundColor:"rgba(255,255,255,0.5)",color:"rgb(100,100,100)",width:"100%"},Object(d.a)(t,e.breakpoints.down(767.98),{padding:10,fontSize:"1em",borderRadius:20}),Object(d.a)(t,e.breakpoints.up(768),{padding:16,fontSize:"1.4em",borderRadius:24}),t)}}));var A=function(){var e=j(),t=Object(c.a)(e,2),n=t[0],s=n.user,i=n.currentConversation,o=(t[1],Object(r.useState)("")),l=Object(c.a)(o,2),d=l[0],u=l[1],b=P(),_=Object(r.useRef)(),m=Object(r.useRef)(),h=function(){var e=Object(k.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!p()(d)){e.next=3;break}return e.abrupt("return");case 3:return n={message:d,firstname:s.firstname,email:s.email},u(""),e.next=7,v.post("/messages/new-message",{newMessage:n,currentConversation:i}).then((function(e){})).catch((function(e){console.log(e)}));case 7:e.sent;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e){"Enter"!==e.key||e.shiftKey||(m.current.click(),e.preventDefault())};return Object(r.useEffect)((function(){return _.current.addEventListener("keypress",f),function(){_.current.removeEventListener("keypress",f)}}),[]),Object(a.jsxs)("div",{className:"typingbar",children:[Object(a.jsx)("div",{className:"typing-search",children:Object(a.jsx)("form",{className:"form",children:Object(a.jsx)(R.a,{multiline:!0,placeholder:"Type text",className:b.inputInput,inputProps:{"aria-label":"search"},onChange:function(e){return t=e.target.value,void u(t);var t},value:d,ref:_})})}),Object(a.jsx)(w.a,{ref:m,disabled:!d,onClick:function(e){return h(e)},className:b.iconButton,children:Object(a.jsx)(L.a,{className:b.iconButton})})]})};n(148);var B=function(e){e.messageName;var t=e.messageContent,n=e.messageTimestamp,r=e.messageReceiver,s=void 0!==r&&r;return Object(a.jsxs)("div",{className:s?"message-receiver":"message",children:[Object(a.jsx)("p",{className:"message-content",children:t}),Object(a.jsx)("p",{className:"message-timestamp",children:n})]})},D=n(203),U=Object(g.a)((function(e){var t;return{avatar:(t={color:e.palette.getContrastText(S.a[500]),backgroundColor:S.a[300]},Object(d.a)(t,e.breakpoints.down(768),{marginRight:10,height:32,width:32,fontSize:20}),Object(d.a)(t,e.breakpoints.up(768),{marginRight:20,height:60,width:60,fontSize:36}),t),displaySideBarButton:Object(d.a)({},e.breakpoints.down(768),{padding:4}),icon:{color:"white"}}}));var W=function(){var e,t=U(),n=j(),s=Object(c.a)(n,2),i=s[0],o=i.user,d=i.currentConversation,u=i.contacts,b=i.conversations,_=s[1],v=Object(h.g)(),m=Object(r.useRef)(),f=Object(r.useState)(window.innerWidth),g=Object(c.a)(f,2),S=g[0],x=g[1];Object(r.useEffect)((function(){function e(){x(window.innerWidth)}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}));var y=function(){var e="",t=null;try{if(p()(d)&&!p()(b))t=b[0];else{if(p()(d))return;console.log(d),t=d}var n,a=Object(l.a)(t.chatters);try{for(a.s();!(n=a.n()).done;){var r=n.value;r!==o.email&&(e=r)}}catch(_){a.e(_)}finally{a.f()}var s,i={},c=Object(l.a)(u);try{for(c.s();!(s=c.n()).done;){var j=s.value;j.email===e&&(i.firstname=j.firstname,i.lastname=j.lastname,i.email=j.email)}}catch(_){c.e(_)}finally{c.f()}return i}catch(m){console.log(m),v.replace("/whatsapp-clone/login")}},E=Object(r.useState)(""),k=Object(c.a)(E,2),T=k[0],L=k[1],R=Object(r.useState)(""),I=Object(c.a)(R,2),P=(I[0],I[1]),W=Object(r.useState)(""),z=Object(c.a)(W,2),M=(z[0],z[1]);return Object(r.useEffect)((function(){!function(){if(p()(d));else{var e=y();console.log(e),e&&(L(e.firstname),P(e.lastname),M(e.email))}}(),m.current.scrollTop=m.current.scrollHeight}),[]),Object(r.useEffect)((function(){var e=y();p()(e)||(L(e.firstname),P(e.lastname),m.current.scrollTop=m.current.scrollHeight)}),[d]),Object(r.useEffect)((function(){d&&(m.current.scrollTop=m.current.scrollHeight)}),[d.messages.length]),Object(a.jsxs)("div",{className:"chat",children:[Object(a.jsxs)("div",{className:"chatbar-navbar",children:[S<768&&Object(a.jsx)(w.a,{className:t.displaySideBarButton,onClick:function(e){return function(e){e.preventDefault(),_({type:"DISPLAY_SIDEBAR"})}(e)},children:Object(a.jsx)(N.a,{className:t.icon})}),Object(a.jsx)(C.a,{className:t.avatar,children:null===T||void 0===T?void 0:T.charAt(0).toUpperCase()}),Object(a.jsx)("div",{className:"chatbar-title",children:Object(a.jsxs)("label",{className:"chatbar-name",children:[T.toUpperCase()," ",null===T||void 0===T?void 0:T.charAt(0).toUpperCase(),"."]})})]}),Object(a.jsx)("div",{className:"chat-body",ref:m,children:p()(null===d||void 0===d?void 0:d.messages)?"":null===(e=d.messages)||void 0===e?void 0:e.map((function(e){return Object(a.jsx)(B,{messageName:e.firstname,messageContent:e.message,messageTimestamp:O()(e.timestamp).format("LT"),messageReceiver:o.email!==e.email},Object(D.a)())}))}),Object(a.jsx)(A,{})]})},z=n(51),M=n.n(z),V=n(101),F=n.n(V),K=n(197),H=n(52),G=n.n(H),J=n(196),Z=Object(g.a)((function(e){var t;return{avatar:(t={gridRow:"1/3",gridColumn:"1/1",justifySelf:"center",alignSelf:"center",backgroundColor:S.a[300]},Object(d.a)(t,e.breakpoints.down(768),{width:48,height:48}),Object(d.a)(t,e.breakpoints.up(768),{width:60,height:60}),t)}}));var q=function(e){var t,n,s=e.conversation,i=Z(),o=(function(e){var t=new Date,n=new Array(7);n[0]="Sunday",n[1]="Monday",n[2]="Tuesday",n[3]="Wednesday",n[4]="Thursday",n[5]="Friday",n[6]="Saturday",n[t.getDay()]}(Date.now()),j()),d=Object(c.a)(o,2),u=d[0],b=(u.messages,u.user),_=u.currentConversation,v=(u.conversations,u.contacts),m=d[1],h=Object(r.useState)(!0),f=Object(c.a)(h,2),g=(f[0],f[1],Object(r.useState)(!1)),w=Object(c.a)(g,2),S=w[0],x=w[1],N=Object(r.useState)(null===(t=s.messages[s.messages.length-1])||void 0===t?void 0:t.message),y=Object(c.a)(N,2),E=y[0],k=y[1],T=Object(r.useState)(O()(null===(n=s.messages[s.messages.length-1])||void 0===n?void 0:n.timestamp).format("L")),L=Object(c.a)(T,2),R=L[0],I=L[1],P=function(){var e,t="",n=Object(l.a)(s.chatters);try{for(n.s();!(e=n.n()).done;){var a=e.value;a!==b.email&&(t=a)}}catch(d){n.e(d)}finally{n.f()}var r,i={},o=Object(l.a)(v);try{for(o.s();!(r=o.n()).done;){var c=r.value;c.email===t&&(i.firstname=c.firstname,i.lastname=c.lastname,i.email=c.email)}}catch(d){o.e(d)}finally{o.f()}return i},A=Object(r.useState)(P().firstname),B=Object(c.a)(A,2),D=B[0],U=(B[1],Object(r.useState)(P().lastname)),W=Object(c.a)(U,2),z=W[0],M=(W[1],Object(r.useState)(P().email)),V=Object(c.a)(M,2);return V[0],V[1],Object(r.useEffect)((function(){p()(s.messages)?k("Hey ! I am using What's App Clone"):(k(s.messages[s.messages.length-1].message),function(e){O()(e).format("L")===O()().format("L")?I(O()(e).format("LT")):I(O()(e).format("L"))}(s.messages[s.messages.length-1].timestamp))}),[s]),Object(r.useEffect)((function(){s._id===(null===_||void 0===_?void 0:_._id)?x(!0):x(!1)}),[_]),Object(a.jsxs)(r.Fragment,{children:[Object(a.jsxs)("div",{className:"".concat(G.a.sidebarConversation," ").concat(S?G.a.sidebarConversation__isCurrent:""),onClick:function(e){return function(e){e.preventDefault(),m({type:"SET_CURRENT_CONVERSATION",currentConv:s}),m({type:"DISPLAY_SIDEBAR"})}(e)},children:[Object(a.jsx)(C.a,{className:i.avatar,children:null===D||void 0===D?void 0:D.charAt(0).toUpperCase()}),Object(a.jsxs)("div",{className:G.a.sidebarConversation__name,children:[D," ",z]}),Object(a.jsx)("p",{className:G.a.sidebarConversation__date,children:R}),Object(a.jsx)("p",{className:G.a.sidebarConversation__lastMessage,children:E})]}),Object(a.jsx)(J.a,{light:!0,variant:"fullWidth"})]})},X=Object(g.a)((function(e){var t,n,a;return{avatar:(t={backgroundColor:S.a[300]},Object(d.a)(t,e.breakpoints.down(768),{width:30,height:30}),Object(d.a)(t,e.breakpoints.up(768),{width:50,height:50}),t),inputInput:{backgroundColor:"rgba(255,255,255,0.5)",borderRadius:"20px",width:"80%",color:"rgb(150,150,150)"},searchIcon:{fontSize:20},addIcon:(n={color:"white",padding:10,borderRadius:"50%"},Object(d.a)(n,e.breakpoints.down(768),{width:30,height:30,backgroundColor:K.a[300]}),Object(d.a)(n,e.breakpoints.up(768),{width:40,height:40}),n),margin:{margin:5},newConversationButton:(a={},Object(d.a)(a,e.breakpoints.down(768),{position:"fixed",bottom:5,right:5}),Object(d.a)(a,e.breakpoints.up(768),{justifySelf:"flex-end",padding:0}),a)}}));var Y=function(){var e=X(),t=j(),n=Object(c.a)(t,2),s=n[0],i=s.user,o=(s.contacts,s.conversations),l=n[1];return Object(r.useEffect)((function(){}),[o]),Object(a.jsxs)("div",{className:M.a.sidebar__mainContent,children:[Object(a.jsxs)("div",{className:M.a.sidebar__navbar,children:[Object(a.jsx)(C.a,{className:"".concat(e.avatar," ").concat(e.margin),children:null===i||void 0===i?void 0:i.firstname.slice(0,1).toUpperCase()}),Object(a.jsx)("p",{className:"".concat(M.a.sidebar__username," ").concat(e.margin),children:null===i||void 0===i?void 0:i.firstname.toUpperCase()}),Object(a.jsx)(w.a,{className:e.newConversationButton,onClick:function(e){return l({type:"SET_SIDEBAR_SECTION",sideSection:"new-conversation"})},children:Object(a.jsx)(F.a,{fontSize:"small",className:e.addIcon})})]}),Object(a.jsx)("div",{className:M.a.sidebar__listContainer,children:o.map((function(e){return Object(a.jsx)(q,{conversation:e},Object(D.a)())}))})]})},Q=n(102),$=n(79),ee=n.n($),te=n(80),ne=n.n(te),ae=Object(g.a)((function(e){var t;return{avatar:(t={backgroundColor:S.a[600]},Object(d.a)(t,e.breakpoints.down(768),{width:48,height:48,marginRight:10}),Object(d.a)(t,e.breakpoints.up(768),{width:60,height:60,fontSize:32,marginRight:20}),t)}}));var re=function(e){var t=e.contact,n=ae(),s=j(),i=Object(c.a)(s,2),o=i[0],d=o.user,u=(o.currentConversation,o.conversations),b=i[1],_=function(){var e=Object(k.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.post("conversations/new-chat",{chatters:[d.email,t.email]}).then((function(e){var t,n=!1,a=Object(l.a)(u);try{for(a.s();!(t=a.n()).done;){t.value._id===e.data._id&&(n=!0)}}catch(r){a.e(r)}finally{a.f()}n||b({type:"ADD_CONVERSATION",conversation:e.data}),b({type:"SET_CURRENT_CONVERSATION",currentConv:e.data}),b({type:"SET_SIDEBAR_SECTION",sideSection:"conversations"})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsxs)("div",{className:ne.a.newContact,onClick:function(e){return _()},children:[Object(a.jsx)(C.a,{className:n.avatar,children:t.firstname[0].toUpperCase()}),Object(a.jsxs)("p",{className:ne.a.newContact__name,children:[t.firstname," ",t.lastname]})]}),Object(a.jsx)(J.a,{light:!0,variant:"fullWidth"})]})},se=Object(g.a)((function(e){return{newGroupButton:{borderRadius:"50%",backgroundColor:"#007868",color:"white",width:30,height:30,padding:10,marginRight:10}}}));var ie=function(){se();var e=j(),t=Object(c.a)(e,2),n=t[0],r=(n.sideSection,n.contacts);return t[1],Object(a.jsx)("div",{className:ee.a.newContactList,children:Object(a.jsx)("div",{className:ee.a.newContactList__listContacts,children:r.map((function(e){return Object(a.jsx)(re,{contact:e},Object(D.a)())}))})})},oe=n(61),ce=n.n(oe),le=Object(g.a)({backButton:{color:"white",fontSize:35},marginButton:{marginRight:10}});var de=function(){var e=le(),t=j(),n=Object(c.a)(t,2);Object(Q.a)(n[0]);var r=n[1];return Object(a.jsxs)("div",{className:ce.a.sidebar__mainContent,children:[Object(a.jsxs)("div",{className:ce.a.sidebar__navbar,children:[Object(a.jsx)(w.a,{className:e.marginButton,onClick:function(e){return r({type:"SET_SIDEBAR_SECTION",sideSection:"conversations"})},children:Object(a.jsx)(N.a,{className:e.backButton})}),Object(a.jsx)("p",{className:ce.a.sidebar__title,children:"New Chat"})]}),Object(a.jsx)("div",{className:ce.a.sidebar__listContainer,children:Object(a.jsx)(ie,{})})]})},ue=n(204);n(151);var be=function(){var e=Object(h.g)(),t=j(),n=Object(c.a)(t,2),s=n[0],i=s.user,o=(s.conversations,s.sideSection),l=(s.currentConversation,n[1],Object(r.useState)(o)),d=Object(c.a)(l,2),u=d[0],b=d[1];return Object(r.useEffect)((function(){i||e.replace("/whatsapp-clone/login"),b(o)}),[o]),Object(a.jsxs)("div",{className:"sidebar",children:[Object(a.jsx)(Y,{}),Object(a.jsx)(ue.a,{anchor:"left",open:"new-conversation"===u,children:Object(a.jsx)(de,{})})]})},je=n(13),_e=n.n(je),ve=n(201),me=n(199),pe=n(103),he=n.n(pe),fe=n(70),Oe=n.n(fe),ge=n(200),we=function(e,t){var n=e.firstname,a=void 0===n?"":n,r=e.lastname,s=void 0===r?"":r,i=e.email,o=e.password,c=e.password2,l=void 0===c?"":c,d={},u=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;switch(t){case"login":p()(i)?d.email="Email is empty":i.match(u)||(d.email="Email wrong format"),p()(o)&&(d.password="Password  is empty");break;case"register":p()(a)&&(d.firstname="Firstname is empty"),p()(s)&&(d.lastname="Lastname is empty"),p()(i)?d.email="Email is empty":i.match(u)||(d.email="Email wrong format"),p()(o)||p()(l)?(p()(o)&&(d.password="Password  is empty"),p()(l)&&(console.log("error"),d.password2="Confirm Password is empty")):o!==l&&(d.password="Error confirming the password")}return{errors:d,isValid:p()(d)}},Ce=Object(g.a)((function(e){var t;return{logo:(t={color:K.a[500],justifySelf:"center"},Object(d.a)(t,e.breakpoints.down(768),{width:44,height:44}),Object(d.a)(t,e.breakpoints.up(768),{width:100,height:100}),t),login__signinButton:{backgroundColor:K.a[500],color:"white","&:hover":{backgroundColor:K.a[300]}},login__newAccountButton:{color:"grey",backgroundColor:"inherit",boxShadow:"none","&:hover":{color:K.a[500],boxShadow:"none",backgroundColor:"inherit"}}}})),Se=Object(g.a)((function(e){return{root:{padding:5}}}));var xe=function(){var e=j(),t=Object(c.a)(e,2),n=(t[0].user,t[1]),s=Ce(),i=(Se(),Object(r.useState)("")),o=Object(c.a)(i,2),l=o[0],d=o[1],u=Object(r.useState)(""),b=Object(c.a)(u,2),_=b[0],m=b[1],p=Object(r.useState)({}),f=Object(c.a)(p,2),O=f[0],g=f[1],w=Object(h.g)(),C=Object(r.useState)(!1),S=Object(c.a)(C,2),x=S[0],N=S[1],y=Object(r.useState)(window.innerWidth),T=Object(c.a)(y,2),L=(T[0],T[1]);Object(r.useEffect)((function(){function e(){L(window.innerWidth)}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}));var R=function(e,t,a){n({type:"SET_USER",user:{firstname:e,lastname:t,email:a,userId:"random_value"}})},I=function(){var e=Object(k.a)(E.a.mark((function e(t){var n,a,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),N(!0),g([]),n=we({email:l,password:_},"login"),a=n.errors,!n.isValid){e.next=12;break}return r={email:l,password:_},console.log("Connection attempt from ".concat(r.email," >>>")),e.next=9,v.post("/users/login",r).then((function(e){console.log("Login successful >> ",e.data.data.email),R(e.data.data.firstname,e.data.data.lastname,e.data.data.email),w.push("/whatsapp-clone/loading")})).catch((function(e){console.log(e),e.response?g({serverError:e.response.data.errors.incorrectPassword}):g({serverError:"Connection failed: The service is temporarily unavailable. Please try again later"}),m(""),d("")}));case 9:e.sent,e.next=14;break;case 12:console.log(">>> Error Sign In : check credentials"),g(a);case 14:N(!1);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:_e.a.login,children:[Object(a.jsxs)("form",{className:_e.a.login__form,children:[Object(a.jsx)(he.a,{className:"".concat(s.logo," ").concat(_e.a.login__elementPosition)}),Object(a.jsx)("p",{className:_e.a.login__elementPosition,children:" Sign In "}),Object(a.jsxs)("p",{hidden:!(null===O||void 0===O?void 0:O.serverError),className:"".concat(_e.a.login__elementPosition," ").concat(_e.a.login__errorMessage),children:[Object(a.jsx)(Oe.a,{}),null===O||void 0===O?void 0:O.serverError]}),Object(a.jsx)(ve.a,{error:!!(null===O||void 0===O?void 0:O.email),helperText:null===O||void 0===O?void 0:O.email,className:"".concat(_e.a.login__elementPosition," "),label:"email",variant:"outlined",value:l,type:"email",onChange:function(e){return d(e.target.value)}}),Object(a.jsx)(ve.a,{error:!!(null===O||void 0===O?void 0:O.password),helperText:null===O||void 0===O?void 0:O.password,className:_e.a.login__elementPosition,label:"password",variant:"outlined",value:_,type:"password",onChange:function(e){return m(e.target.value)}}),Object(a.jsxs)(me.a,{disabled:x,className:"".concat(_e.a.login__elementPosition," ").concat(s.login__signinButton),variant:"contained",type:"submit",onClick:function(e){return I(e)},children:["Sign In",x&&Object(a.jsx)(ge.a,{style:{color:"white"}})]}),Object(a.jsx)("p",{className:_e.a.login__elementPosition,children:" Or "}),Object(a.jsx)(me.a,{className:"".concat(_e.a.login__elementPosition," ").concat(s.login__newAccountButton),href:"/whatsapp-clone/new-account",variant:"contained",type:"submit",children:"Create new account"}),Object(a.jsxs)("div",{className:_e.a.login__elementPosition,children:[Object(a.jsx)("p",{children:"TEST :"}),Object(a.jsx)("p",{children:"email: user1@email.com"}),Object(a.jsx)("p",{children:"pwd: test1"})]})]}),Object(a.jsx)("h1",{className:_e.a.login__title,children:"What's app Clone"})]})},Ne=n(34),ye=Object(g.a)((function(e){return{logo:{width:40,height:40},register__signupButton:{backgroundColor:K.a[500],color:"white","&:hover":{backgroundColor:K.a[300]}}}}));var Ee=function(){var e=ye(),t=Object(r.useState)(""),n=Object(c.a)(t,2),s=n[0],i=n[1],o=Object(r.useState)(""),l=Object(c.a)(o,2),d=l[0],u=l[1],b=Object(r.useState)(""),_=Object(c.a)(b,2),m=_[0],p=_[1],f=Object(r.useState)(""),O=Object(c.a)(f,2),g=O[0],C=O[1],S=Object(r.useState)(""),x=Object(c.a)(S,2),y=x[0],T=x[1],L=j(),R=Object(c.a)(L,2),I=(R[0].user,R[1]),P=Object(r.useState)({}),A=Object(c.a)(P,2),B=A[0],D=A[1],U=Object(h.g)(),W=function(){var e=Object(k.a)(E.a.mark((function e(t){var n,a,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),D([]),n=we({firstname:s,lastname:d,email:m,password:g,password2:y},"register"),a=n.errors,n.isValid?(r={firstname:s,lastname:d,email:m,password:g,password2:y},v.post("/users/register",r).then((function(e){e&&(console.log("New user registered >>> "),console.log(e.data),I({type:"SET_USER",user:{firstname:e.data.firstname,lastname:e.data.lastname,email:e.data.email,userId:"random_value"}}),U.push("/whatsapp-clone/loading"))})).catch((function(e){console.log(e),e.response?D({serverError:e.response.data.errors.knownUser}):D({serverError:"Connection failed: The service is temporarily unavailable. Please try again later"})}))):(console.log(">>> Error Sign Up : check credentials"),D(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{className:_e.a.login,children:[Object(a.jsxs)("form",{className:_e.a.login__form,children:[Object(a.jsx)(Ne.b,{to:"/whatsapp-clone/login",className:e.logoPositionLeft,children:Object(a.jsx)(w.a,{children:Object(a.jsx)(N.a,{className:e.logo2})})}),Object(a.jsx)("p",{className:_e.a.login__elementPosition,children:" Sign Up "}),Object(a.jsxs)("p",{hidden:!(null===B||void 0===B?void 0:B.serverError),className:"".concat(_e.a.login__elementPosition," ").concat(_e.a.login__errorMessage),children:[Object(a.jsx)(Oe.a,{}),null===B||void 0===B?void 0:B.serverError]}),Object(a.jsx)(ve.a,{error:!!(null===B||void 0===B?void 0:B.firstname),helperText:null===B||void 0===B?void 0:B.firstname,className:_e.a.login__elementPosition,label:"First name",variant:"outlined",value:s,onChange:function(e){return i(e.target.value)}}),Object(a.jsx)(ve.a,{error:!!(null===B||void 0===B?void 0:B.lastname),helperText:null===B||void 0===B?void 0:B.lastname,className:_e.a.login__elementPosition,label:"Last name",variant:"outlined",value:d,onChange:function(e){return u(e.target.value)}}),Object(a.jsx)(ve.a,{error:!!(null===B||void 0===B?void 0:B.email),helperText:null===B||void 0===B?void 0:B.email,className:_e.a.login__elementPosition,label:"Email",variant:"outlined",value:m,type:"email",onChange:function(e){return p(e.target.value)}}),Object(a.jsx)(ve.a,{error:!!(null===B||void 0===B?void 0:B.password),helperText:null===B||void 0===B?void 0:B.password,className:_e.a.login__elementPosition,label:"Password",variant:"outlined",value:g,type:"password",onChange:function(e){return C(e.target.value)}}),Object(a.jsx)(ve.a,{error:!!(null===B||void 0===B?void 0:B.password2),helperText:null===B||void 0===B?void 0:B.password2,className:_e.a.login__elementPosition,label:"Confirm Password",variant:"outlined",value:y,type:"password",onChange:function(e){return T(e.target.value)}}),Object(a.jsx)(me.a,{className:"".concat(_e.a.login__elementPosition," ").concat(e.register__signupButton),variant:"contained",type:"submit",onClick:function(e){return W(e)},children:"Sign Up"})]}),Object(a.jsx)("h1",{className:_e.a.login__title,children:"What's app Clone"})]})},ke=n(71),Te=n.n(ke),Le=(n(152),Object(g.a)((function(e){var t;return{iconPosition:{justifySelf:"center",alignSelf:"center"},circularProgress:(t={color:"white"},Object(d.a)(t,e.breakpoints.down(768),{width:40,height:40}),Object(d.a)(t,e.breakpoints.up(768),{width:100,height:100}),t)}})));var Re=function(){var e=Le(),t=j(),n=Object(c.a)(t,2),s=n[0],i=s.user,o=s.currentConversation,d=(s.conversations,n[1]),u=Object(h.g)(),b=Object(h.h)();return Object(r.useEffect)((function(){i?(console.log("User = "),console.log(i),function(){var e=Object(k.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("/users/sync").then((function(e){var t,n=[],a=Object(l.a)(e.data);try{for(a.s();!(t=a.n()).done;){var r=t.value;r.email!==i.email&&n.push(r)}}catch(s){a.e(s)}finally{a.f()}d({type:"SET_CONTACTS",contacts:n}),console.log("Done: Sync Contacts List"),console.log(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){var e=Object(k.a)(E.a.mark((function e(){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.post("/conversations/sync",i).then((function(e){e.data&&(p()(e.data)||(d({type:"SET_CONVERSATIONS_LIST",convs:e.data}),p()(o)&&d({type:"SET_CURRENT_CONVERSATION",currentConv:e.data[0]}),console.log("Done: Sync ConversationsList"),console.log(e.data)))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()):"/whatsapp-clone/new-account"!==b.pathname&&u.replace("/whatsapp-clone/login")}),[]),Object(r.useEffect)((function(){var e=new Te.a("3678c5b88461dcff7cb9",{cluster:"eu"}).subscribe("messages");return e.bind("updated",(function(e){console.log(e),d({type:"ADD_NEW_MESSAGE",data:e})})),function(){e.unbind_all(),e.unsubscribe()}}),[]),Object(r.useEffect)((function(){return setTimeout((function(){u.replace("/whatsapp-clone/conversations")}),3e3),function(){}}),[]),Object(a.jsx)("div",{className:e.iconPosition,children:Object(a.jsx)(ge.a,{className:e.circularProgress})})},Ie=n(104),Pe=n.n(Ie);var Ae=function(){var e=j(),t=Object(c.a)(e,2),n=t[0],s=n.displaySideBar,i=n.currentConversation,o=(t[1],Object(r.useState)(window.innerWidth)),l=Object(c.a)(o,2),d=l[0],u=l[1];return Object(r.useEffect)((function(){function e(){u(window.innerWidth)}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}})),console.log(p()(i)),p()(i)?Object(a.jsx)(be,{}):Object(a.jsxs)("div",{className:Pe.a.app__body,children:[d<768?Object(a.jsx)(ue.a,{anchor:"left",open:s,children:Object(a.jsx)(be,{})}):Object(a.jsx)(be,{}),Object(a.jsx)(W,{})]})};var Be=function(){var e=j(),t=Object(c.a)(e,2),n=t[0],s=(n.conversations,n.displaySideBar,n.user),i=n.currentConversation,o=t[1];return console.log(i),Object(r.useEffect)((function(){var e=new Te.a("3678c5b88461dcff7cb9",{cluster:"eu"}).subscribe("messages");return e.bind("updated",(function(e){o({type:"ADD_NEW_MESSAGE",data:e})})),function(){e.unbind_all(),e.unsubscribe()}}),[]),Object(a.jsx)("div",{className:"app",children:Object(a.jsxs)(h.d,{children:[Object(a.jsx)(h.b,{path:"/whatsapp-clone/login",children:Object(a.jsx)(xe,{})}),Object(a.jsx)(h.b,{path:"/whatsapp-clone/new-account",children:Object(a.jsx)(Ee,{})}),Object(a.jsx)(h.b,{path:"/whatsapp-clone/loading",children:Object(a.jsx)(Re,{})}),s?Object(a.jsx)(h.b,{path:"/whatsapp-clone/conversations",children:Object(a.jsx)(Ae,{})}):Object(a.jsx)(h.a,{to:"/whatsapp-clone/login"}),Object(a.jsx)(h.b,{path:"/",children:Object(a.jsx)(xe,{})})]})})},De=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,208)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),s(e),i(e)}))},Ue=n(105),We=n(20),ze=function(e,t){switch(t.type){case"SET_USER":return Object(We.a)(Object(We.a)({},e),{},{user:t.user});case"SET_SIDEBAR_SECTION":return Object(We.a)(Object(We.a)({},e),{},{sideSection:t.sideSection});case"SET_CONTACTS":return Object(We.a)(Object(We.a)({},e),{},{contacts:t.contacts});case"SET_CURRENT_CONVERSATION":return Object(We.a)(Object(We.a)({},e),{},{currentConversation:t.currentConv});case"ADD_CONVERSATION":return Object(We.a)(Object(We.a)({},e),{},{conversations:[].concat(Object(Ue.a)(e.conversations),[t.conversation])});case"SET_CONVERSATIONS_LIST":return Object(We.a)(Object(We.a)({},e),{},{conversations:t.convs});case"ADD_NEW_MESSAGE":for(var n=0;n<e.conversations.length;n++)if(String(t.data.conversationId)===String(e.conversations[n]._id))return e.conversations[n].messages.push(t.data.message),Object(We.a)({},e);break;case"DISPLAY_SIDEBAR":return Object(We.a)(Object(We.a)({},e),{},{displaySideBar:!e.displaySideBar})}};o.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(b,{initialState:{user:null,conversations:[],sideSection:"conversations",contacts:[],currentConversation:{},displaySideBar:!1},reducer:ze,children:Object(a.jsx)(Ne.a,{children:Object(a.jsx)(Be,{})})})}),document.getElementById("root")),De()},51:function(e,t,n){e.exports={sidebar__mainContent:"SidebarConversationSection_sidebar__mainContent__3f0Iq",sidebar__left:"SidebarConversationSection_sidebar__left__3dOap",sidebar__username:"SidebarConversationSection_sidebar__username__2F3mX",sidebar__navbar:"SidebarConversationSection_sidebar__navbar__33nIS",sidebar__searchbar:"SidebarConversationSection_sidebar__searchbar__1sVga",sidebar__search:"SidebarConversationSection_sidebar__search__2jN3M",sidebar__searchIcon:"SidebarConversationSection_sidebar__searchIcon__1R45K",sidebar__listContainer:"SidebarConversationSection_sidebar__listContainer__3sT8Z"}},52:function(e,t,n){e.exports={sidebarConversation:"SidebarConversation_sidebarConversation__28NEe",sidebarConversation__selected:"SidebarConversation_sidebarConversation__selected__3icnK",sidebarConversation__name:"SidebarConversation_sidebarConversation__name__sGyfp",sidebarConversation__lastMessage:"SidebarConversation_sidebarConversation__lastMessage__1-Xag",sidebarConversation__date:"SidebarConversation_sidebarConversation__date__3KM1S",sidebarConversation__isCurrent:"SidebarConversation_sidebarConversation__isCurrent__3CTNk"}},61:function(e,t,n){e.exports={sidebar__mainContent:"SidebarNewConversationSection_sidebar__mainContent__3mEAg",sidebar__navbar:"SidebarNewConversationSection_sidebar__navbar__2wNiE",sidebar__title:"SidebarNewConversationSection_sidebar__title__1KWah",sidebar__searchbar:"SidebarNewConversationSection_sidebar__searchbar__1KkWR",sidebar__search:"SidebarNewConversationSection_sidebar__search__3jizx",sidebar__searchIcon:"SidebarNewConversationSection_sidebar__searchIcon__13MQR",sidebar__listContainer:"SidebarNewConversationSection_sidebar__listContainer__2QnyX"}},79:function(e,t,n){e.exports={newContactList:"NewContactList_newContactList__3l80y",newContactList__listContacts:"NewContactList_newContactList__listContacts__2qxLH",newContactList__item:"NewContactList_newContactList__item__3i2SW",title:"NewContactList_title__2KKn7",newContactList__title:"NewContactList_newContactList__title__1sqNT",newContactList__title2:"NewContactList_newContactList__title2__3b1BJ"}},80:function(e,t,n){e.exports={newContact:"NewContact_newContact__3dNVM",newContact__name:"NewContact_newContact__name__iHGOP"}},86:function(e,t,n){}},[[153,1,2]]]);
//# sourceMappingURL=main.40715fd6.chunk.js.map